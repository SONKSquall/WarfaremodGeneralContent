<?xml version="1.0" encoding="utf-8"?>
<Items>
  <Item name="" identifier="WR_landmine" category="Weapon" maxstacksize="16" maxstacksizecharacterinventory="1" cargocontaineridentifier="metalcrate" tags="smallitem,WR_mine" damagedbyprojectiles="true" DamagedByExplosions="true" Scale="0.5" impactsoundtag="impact_metal_light">
    <Fabricate suitablefabricators="stratshop" requiredtime="5" amount="2">
      <RequiredItem identifier="WR_currency" />
    </Fabricate>
    <InventoryIcon texture="%ModDir%/Sprites/Items/Inventory Icons.png" sourcerect="256,64,64,64" origin="0.5,0.5" />
    <Sprite texture="%ModDir%/Sprites/Items/Equipment.png" sourcerect="354,231,80,25" depth="0.55" origin="0.5,0.5" />
    <Body width="80" height="20" density="12" />
    <MotionSensor range="15" target="Human,Monster" minimumvelocity="1" detectownmotion="false" canbeselected="false">
      <!-- decreases condition by 20 every second until it reachs 50 -->
      <StatusEffect type="OnNotContained" targettype="This" Condition="-20">
        <Conditional Condition="gt 50.0" />
      </StatusEffect>
      <!-- turns transparent when its condition hits 50 -->
      <StatusEffect type="OnNotContained" targettype="This" spritecolor="255,255,255,63" disabledeltatime="true">
        <Conditional Condition="lte 50.0" />
      </StatusEffect>
      <!-- resets condition and color when in a inventory -->
      <StatusEffect type="OnContained" targettype="This" setValue="true" Condition="100.0" spritecolor="255,255,255,255" disabledeltatime="true" />
      <StatusEffect type="OnUse" target="This" disabledeltatime="true" duration="1" Stackable="false" conditionalcomparison="And">
        <Conditional Condition="lte 50.0" />
        <sound file="Content/Items/Button/Switch1.ogg" range="250.0" FrequencyMultiplier="0.5" />
      </StatusEffect>
      <StatusEffect type="OnUse" target="This" Condition="-100.0" disabledeltatime="true" delay="0.125" CheckConditionalAlways="true" conditionalcomparison="And">
        <Conditional Condition="lte 50.0" />
      </StatusEffect>
      <StatusEffect type="OnBroken" target="This">
        <ParticleEmitter particle="shrapnel" anglemin="0" anglemax="360" particleamount="3" velocitymin="200" velocitymax="300" scalemin="0.4" scalemax="0.5" colormultiplier="255,255,255" />
        <sound file="Content/Items/Weapons/ExplosionMedium1.ogg" range="5000" FrequencyMultiplier="1.5" />
        <sound file="Content/Items/Weapons/ExplosionMedium2.ogg" range="5000" FrequencyMultiplier="1.5" />
        <sound file="Content/Items/Weapons/ExplosionMedium3.ogg" range="5000" FrequencyMultiplier="1.5" />
        <Explosion range="300.0" structuredamage="50.0" itemdamage="5" force="10" severlimbsprobability="0.5" decal="explosion" decalsize="0.75" penetration="0.25">
          <Affliction identifier="explosiondamage" strength="400" />
          <Affliction identifier="bleeding" strength="200" />
          <Affliction identifier="stun" strength="7" />
        </Explosion>
        <RemoveItem />
      </StatusEffect>
    </MotionSensor>
    <LightComponent IsOn="false" Range="0" PowerConsumption="0.0">
      <StatusEffect type="OnActive" target="This" disabledeltatime="true" delay="4" Stackable="false" IsOn="false" />
      <StatusEffect type="OnActive" target="This" disabledeltatime="true" duration="4" Stackable="false">
        <ParticleEmitter particle="minedetect" AngleMax="360" ScaleMultiplier="0.5,0.5" ParticlesPerSecond="1" CopyEntityAngle="True" ColorMultiplier="255,255,255,255" />
        <Conditional IsContained="false" />
      </StatusEffect>
    </LightComponent>
    <Pickable slots="Any" msg="ItemMsgPickUpSelect" />
  </Item>
  <Item name="" identifier="WR_barbedwire_setup" category="Equipment" maxstacksize="16" maxstacksizecharacterinventory="1" cargocontaineridentifier="metalcrate" tags="smallitem" Scale="0.5" impactsoundtag="impact_metal_light">
    <Fabricate suitablefabricators="stratshop" requiredtime="5" amount="2">
      <RequiredItem identifier="WR_currency" />
    </Fabricate>
    <InventoryIcon texture="%ModDir%/Sprites/Items/Inventory Icons.png" sourcerect="384,64,64,64" origin="0.5,0.5" />
    <Sprite texture="%ModDir%/Sprites/Items/Defenses.png" sourcerect="153,0,254,78" depth="0.55" origin="0.5,0.5" />
    <Body width="254" height="55" density="12" />
    <Holdable selectkey="Select" slots="Any,RightHand+LeftHand" Aimable="false" msg="ItemMsgDetach" attachable="true" AttachedByDefault="false" HoldPos="0,20" handle1="50,-20" handle2="40,-20">
      <!-- the same system as the beartrap mod (credits to whosyourdaddy) -->
      <StatusEffect type="OnNotContained" targettype="This" duration="1" Stackable="false">
        <Conditional IsAttached="true" />
        <SpawnItem identifier="WR_barbedwire" spawnposition="This" rotationtype="Fixed" rotation="0" />
        <RemoveItem />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="" identifier="WR_barbedwire" category="Equipment" maxstacksize="16" maxstacksizecharacterinventory="1" cargocontaineridentifier="metalcrate" tags="smallitem" DamagedByExplosions="true" ExplosionDamageMultiplier="0.25" DamagedByMeleeWeapons="true" InteractDistance="100" Scale="0.5" impactsoundtag="impact_metal_light">
    <InventoryIcon texture="%ModDir%/Sprites/notexture.png" sourcerect="0,0,64,64" origin="0.5,0.5" />
    <Sprite texture="%ModDir%/Sprites/Items/Defenses.png" sourcerect="0,0,150,150" depth="0.01" origin="0.5,0.5" />
    <Body width="150" height="150" density="12" />
    <MotionSensor range="40" target="Human,Monster" minimumvelocity="2" detectownmotion="false" canbeselected="false">
      <StatusEffect type="OnUse" targettype="NearbyCharacters" Interval="0.25" disableDeltaTime="true" range="150">
        <Affliction identifier="lacerations" strength="1" />
        <Affliction identifier="slow" strength="40" />
      </StatusEffect>
      <StatusEffect type="OnDamaged" targettype="This">
        <sound file="Content/Sounds/Damage/HitMetal1.ogg" range="500" selectionmode="Random" />
        <sound file="Content/Sounds/Damage/HitMetal2.ogg" range="500" />
        <sound file="Content/Sounds/Damage/HitMetal3.ogg" range="500" />
        <sound file="Content/Sounds/Damage/HitMetal4.ogg" range="500" />
        <sound file="Content/Sounds/Damage/HitMetal5.ogg" range="500" />
        <sound file="Content/Sounds/Damage/HitMetal6.ogg" range="500" />
      </StatusEffect>
      <StatusEffect type="OnBroken" targettype="This">
        <sound file="Content/Sounds/Damage/StructureBlunt4.ogg" range="500" selectionmode="Random" />
        <sound file="Content/Sounds/Damage/StructureBlunt5.ogg" range="500" />
        <sound file="Content/Sounds/Damage/StructureBlunt6.ogg" range="500" />
        <sound file="Content/Sounds/Damage/StructureBlunt7.ogg" range="500" />
        <RemoveItem />
      </StatusEffect>
    </MotionSensor>
    <Pickable slots="Any" msg="itemmsgpickupselect" pickkey="Select" PickingTime="15.0">
      <StatusEffect type="OnPicked" targettype="This">
        <SpawnItem identifier="WR_barbedwire_setup" spawnposition="SameInventory" rotationtype="Fixed" rotation="0" />
        <RemoveItem />
      </StatusEffect>
    </Pickable>
  </Item>
  <Item name="" identifier="WR_sandbag_setup" category="Equipment" maxstacksize="16" maxstacksizecharacterinventory="1" cargocontaineridentifier="metalcrate" tags="smallitem" Scale="0.5" impactsoundtag="impact_metal_light">
    <Fabricate suitablefabricators="stratshop" requiredtime="5" amount="2">
      <RequiredItem identifier="WR_currency" />
    </Fabricate>
    <InventoryIcon texture="%ModDir%/Sprites/notexture.png" sourcerect="0,0,64,64" origin="0.5,0.5" />
    <Sprite texture="%ModDir%/Sprites/Items/Defenses.png" sourcerect="0,153,128,99" depth="0.55" origin="0.5,0.5" />
    <Body width="128" height="90" density="12" />
    <Holdable selectkey="Select" slots="Any,RightHand+LeftHand" Aimable="false" msg="ItemMsgDetach" attachable="true" AttachedByDefault="false" HoldPos="70,-40" handle1="-20,-40" handle2="-20,-40">
      <!-- the same system as the beartrap mod (credits to whosyourdaddy) -->
      <StatusEffect type="OnNotContained" targettype="This" duration="1" Stackable="false">
        <Conditional IsAttached="true" />
        <SpawnItem identifier="WR_sandbag" spawnposition="This" rotationtype="MainLimb" rotation="0" />
        <RemoveItem />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="" identifier="WR_sandbag" category="Equipment" maxstacksize="16" maxstacksizecharacterinventory="1" cargocontaineridentifier="metalcrate" tags="smallitem" Health="500" DamagedByExplosions="true" ExplosionDamageMultiplier="2.5" DamagedByProjectiles="true" InteractDistance="100" Scale="0.5" impactsoundtag="impact_soft">
    <InventoryIcon texture="%ModDir%/Sprites/notexture.png" sourcerect="0,0,64,64" origin="0.5,0.5" />
    <Sprite texture="%ModDir%/Sprites/Items/Defenses.png" sourcerect="153,81,88,253" depth="0.01" origin="0.5,0.45" />
    <Body width="50" height="252" density="12" />
    <Pickable slots="Any" msg="itemmsgpickupselect" pickkey="Select" PickingTime="15.0">
      <StatusEffect type="OnPicked" targettype="This">
        <SpawnItem identifier="WR_sandbag_setup" spawnposition="SameInventory" rotationtype="Fixed" rotation="0" />
        <RemoveItem />
      </StatusEffect>
      <StatusEffect type="OnBroken" targettype="This">
        <RemoveItem />
      </StatusEffect>
    </Pickable>
  </Item>
</Items>